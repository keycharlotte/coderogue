# Code Rogue 技能系统策划案

## 1. 系统概述

### 1.1 核心理念
- **卡牌化技能**：每个技能以卡牌形式呈现，直观展示技能信息
- **轨道充能**：技能通过轨道系统进行充能和释放
- **成长选择**：升级时提供三选一的技能获取方式

### 1.2 设计目标
- 提供策略性的技能选择体验
- 增强游戏的可重玩性
- 平衡技能强度与获取难度
- 创造多样化的构建路线

## 2. 技能卡牌系统

### 2.1 卡牌基本属性
技能卡牌属性：

- 技能名称：技能的名称，用于识别技能
- 技能图标：技能的可视化表示，用于展示技能
- 技能描述：技能的详细介绍，包括效果、消耗等
- 技能类型：主动，被动
- 充能消耗：技能释放需要的充能点数
- 技能等级：技能的升级等级，越高技能越强
- 稀有度（普通/稀有/史诗/传说）：技能的稀有程度，影响获取难度
- 技能标签（攻击/防御/辅助/移动）：技能的分类标签，影响技能效果
- 技能效果：技能的具体效果，包括伤害、治疗、移动等
### 2.2 技能分类

#### 2.2.1 攻击类技能
- **火球术**
  - 消耗：2充能
  - 效果：发射火球，造成范围伤害
  - 稀有度：普通

- **闪电链**
  - 消耗：3充能
  - 效果：闪电在敌人间跳跃，最多5个目标
  - 稀有度：稀有

- **陨石术**
  - 消耗：5充能
  - 效果：召唤陨石轰击大范围区域
  - 稀有度：史诗

#### 2.2.2 防御类技能
- **护盾术**
  - 消耗：2充能
  - 效果：获得临时护盾，吸收伤害
  - 稀有度：普通

- **时间减缓**
  - 消耗：4充能
  - 效果：减缓周围敌人移动速度
  - 稀有度：稀有

#### 2.2.3 辅助类技能
- **治疗术**
  - 消耗：2充能
  - 效果：恢复生命值
  - 稀有度：普通

- **充能加速**
  - 消耗：1充能
  - 效果：短时间内充能速度翻倍
  - 稀有度：稀有

#### 2.2.4 变身类技能
- **瞬移**
  - 消耗：3充能
  - 效果：瞬间移动到指定位置
  - 稀有度：稀有

- **冲刺**
  - 消耗：1充能
  - 效果：快速向前冲刺，穿过敌人
  - 稀有度：普通

#### 2.2.5 经济类技能
- **强化武器**
  - 消耗：3充能
  - 效果：提升武器攻击力
  - 稀有度：普通

- **强化护甲**
  - 消耗：3充能
  - 效果：提升护甲防御力
  - 稀有度：普通

- **杀敌翻倍**
  - 消耗：3充能
  - 效果：给自己添加一个buff，在buff持续时间内杀敌奖励翻倍
  - 持续时间：20秒
  - 稀有度：普通
  
## 3. 技能轨道充能系统

### 3.1 轨道机制
技能轨道属性：

- 最大充能点数：2000
- 充能速度：1充能/秒（基础）
- 轨道槽位：4个（可升级扩展）
- 充能显示：环形进度条
- 轨道自动装填：每条轨道空闲时，自动从牌库中抽取一张卡牌进行充能
- 独立充能：每条轨道独立计算充能点数
- 自动释放：当轨道充能点数达到或超过卡牌消耗时，自动释放技能并清空轨道
- 
### 3.2 充能规则
- **自动充能**：每秒自动获得1点充能
- **击败敌人**：击败敌人获得额外充能
  - 普通敌人：+1充能
  - 精英敌人：+2充能
  - Boss敌人：+5充能
- **输入完成**：输入完整单词获得+1充能
- **完美输入**：完美输入单词获得+0.5充能
- **连击奖励**：连续击败敌人获得充能加成

### 3.3 技能释放
- 释放技能消耗对应充能点数
- 充能不足时无法释放技能

## 4. 升级选择系统

### 4.1 升级触发
- 玩家等级提升时触发技能选择
- 每次升级提供3个随机技能选项
- 玩家必须选择其中一个

### 4.2 选择池机制
技能选择权重：

- 普通技能：60%
- 稀有技能：30%
- 史诗技能：9%
- 传说技能：1%
选择规则：

- 不会出现重复技能
- 已拥有技能会升级（提升效果/降低消耗）
- 根据当前构建倾向调整权重


### 4.3 技能升级
当选择已拥有的技能时，技能会获得升级：
- **等级1→2**：效果提升25%
- **等级2→3**：效果提升50%，或获得新特性
- **等级3→4**：效果提升75%，充能消耗-1
- **等级4→5**：效果翻倍，获得特殊效果

## 5. 技能标签(羁绊)系统

### 5.1 双羁绊机制
- 每张卡牌至少有两个标签
### 5.2 标签羁绊效果

#### 5.2.1 基础标签组合
- **2个相同标签**：获得该类型10%属性加成
- **4个相同标签**：获得该类型25%属性加成，并获得特殊被动效果
- **6个相同标签**：获得该类型50%属性加成，并获得强化特殊被动效果

#### 5.2.2 进阶标签组合
- **3个相同标签**：获得该类型15%属性加成
- **5个相同标签**：获得该类型35%属性加成，并获得特殊被动效果
- **7个相同标签**：获得该类型60%属性加成，并获得强化特殊被动效果
- **9个相同标签**：获得该类型100%属性加成，并获得终极特殊被动效果

#### 5.2.3 标签被动效果示例
- **攻击标签**
  - 4个：暴击率提升10%
  - 6个：攻击附带燃烧效果
  - 7个：暴击伤害提升50%
  - 9个：每次攻击有概率触发连锁打击

- **防御标签**
  - 4个：受到伤害减少15%
  - 6个：受伤时反弹伤害
  - 7个：获得持续生命恢复
  - 9个：免疫致命伤害一次

- **辅助标签**
  - 4个：充能速度提升20%
  - 6个：技能冷却时间减少25%
  - 7个：释放技能时恢复生命值
  - 9个：技能效果范围翻倍

- **移动标签**
  - 4个：移动速度提升20%
  - 6个：穿越敌人时造成伤害
  - 7个：短距离瞬移能力
  - 9个：无视地形阻碍

## 6. 平衡性设计

### 6.1 技能平衡
- 高伤害技能需要更多充能和更长冷却
- 防御技能提供安全但不直接增加输出
- 辅助技能提供长期收益但即时效果有限

### 6.2 获取平衡
- 强力技能稀有度更高，获取概率更低
- 基础技能容易获得，保证玩家基本体验
- 技能升级提供明显收益，鼓励专精

## 7. UI/UX设计

### 7.1 技能卡牌界面
- 不同稀有度使用不同边框颜色
- 技能图标清晰易识别
- 充能消耗和冷却时间醒目显示

### 7.2 技能轨道界面
- 环形充能条，直观显示当前充能
- 4个技能槽位呈十字排列
- 技能冷却以暗化效果显示
- 快捷键提示清晰可见

### 7.3 升级选择界面
- 3张卡牌水平排列
- 卡牌可以翻转查看详细信息
- 选择时有明显的视觉反馈
- 显示当前技能构建概览

## 8. 技术实现要点

### 8.1 数据结构
```csharp
public class SkillCard
{
    public string Name { get; set; }
    public string Description { get; set; }
    public int ChargeCost { get; set; }
    public SkillRarity Rarity { get; set; }
    public SkillType Type { get; set; }
    public int Level { get; set; }
    public SkillTag[] Tags { get; set; }
}

public class SkillTrack
{
    public float CurrentCharge { get; set; }
    public float MaxCharge { get; set; }
    public SkillCard[] EquippedSkills { get; set; }
    public float[] Cooldowns { get; set; }
}

public class SkillTag
{
    public string Name { get; set; }
    public string Description { get; set; }
}

public enum SkillRarity
{
    Common,
    Rare,
    Epic,
    Legendary
}

### 8.2 核心系统
- SkillManager ：管理技能系统核心逻辑
- ChargeSystem ：处理充能计算和更新
- SkillSelector ：处理升级时的技能选择
- SkillEffectSystem ：处理技能效果和组合
## 9. 扩展性考虑
### 9.1 未来扩展
- 技能符文系统：为技能添加额外属性
- 技能套装：收集特定技能组合获得奖励
- 技能觉醒：达到特定条件解锁技能新形态
- 技能融合：将多个技能合成为更强技能
### 9.2 数据驱动
- 技能数据使用JSON配置文件
- 支持热更新技能属性
- 便于平衡性调整和新技能添加
## 10. 测试要点
### 10.1 平衡性测试
- 各技能的使用率统计
- 不同构建路线的胜率分析
- 技能组合的效果验证
### 10.2 用户体验测试
- 技能选择的决策时间
- 界面操作的流畅性
- 技能效果的可读性